{"version":3,"sources":["jquery.contextMenu.min.js"],"names":["factory","define","amd","exports","require","jQuery","$","splitAccesskey","val","k","t","split","keys","i","charAt","toUpperCase","push","inputLabel","node","id","name","menuChildren","items","$children","counter","each","label","item","$node","this","nodeName","toLowerCase","find","length","text","children","first","get","attr","disabled","callback","click","undefined","icon","type","selected","radio","value","options","html","clone","support","htmlMenuitem","window","htmlCommand","eventSelectstart","document","documentElement","ui","widget","cleanData","orig","elems","events","elem","_data","remove","triggerHandler","e","$currentTrigger","initialized","$win","namespaces","menus","types","defaults","selector","appendTo","trigger","autoHide","delay","reposition","classNames","hover","visible","notSelectable","iconEdit","iconCut","iconCopy","iconPaste","iconDelete","iconAdd","iconQuit","determinePosition","$menu","position","css","my","at","of","offset","collision","top","outerHeight","left","outerWidth","opt","x","y","call","bottom","scrollTop","height","right","scrollLeft","width","positionSubmenu","zIndex","animation","duration","show","hide","noop","hoveract","timer","pageX","pageY","zindex","$t","zin","$tt","Math","max","parseInt","parent","indexOf","prop","handle","abortevent","preventDefault","stopImmediatePropagation","contextmenu","$this","data","originalEvent","mouseButton","hasClass","build","built","extend","isEmptyObject","console","error","log","Error","$trigger","op","create","showMenu","hasOwnProperty","isFunction","currentTarget","menuContainer","srcElement","target","originalTarget","offsetX","offsetY","Event","mousedown","is","button","mouseup","removeData","mouseenter","$related","relatedTarget","$document","closest","on","mousemove","setTimeout","off","mouseleave","clearTimeout","layerClick","root","$window","triggerAction","elementFromPoint","$layer","has","one","contextMenu","keyStop","isInput","stopPropagation","key","targetZIndex","getZIndexOfTriggerTarget","style","offsetParent","parentElement","keyCode","shiftKey","$selected","blur","$parent","itemdata","String","fromCharCode","accesskeys","prevItem","$s","$prev","prev","last","$round","itemMouseleave","itemMouseenter","$input","focus","nextItem","$next","next","focusInput","contextMenuRoot","blurInput","menuMouseenter","hovering","menuMouseleave","itemClick","contextMenuKey","callbacks","Object","prototype","update","inputClick","hideMenu","force","focusItem","addClass","join","siblings","removeClass","filter","blurItem","additionalZValue","layer","pos","createNameNode","$name","_accesskey","_beforeAccesskey","append","createTextNode","_afterAccesskey","className","$label","accesskey","ak","aks","matched","match","RegExp","commands","hasTypes","inputs","prependTo","_icon","body","resize","nested","display","ceil","minWidth","maxWidth","addBack","$item","insertBefore","fn","operation","$o","context","isPlainObject","o","$context","_hasContext","ns","contextmenu:hide.contextMenu","prevcommand.contextMenu","nextcommand.contextMenu","contextmenu.contextMenu","mouseenter.contextMenu","mouseleave.contextMenu","mouseup.contextMenu","contextmenu:focus.contextMenu","contextmenu:blur.contextMenu","$visibleMenu","fromMenu","setInputValues","getInputValues","element"],"mappings":"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","file":"jquery.contextMenu.min.js","sourcesContent":["/*!\r\n * jQuery contextMenu v2.1.0 - Plugin for simple contextMenu handling\r\n *\r\n * Version: v2.1.0\r\n *\r\n * Authors: Bj√∂rn Brala (SWIS.nl), Rodney Rehm, Addy Osmani (patches for FF)\r\n * Web: http://swisnl.github.io/jQuery-contextMenu/\r\n *\r\n * Copyright (c) 2011-2016 SWIS BV and contributors\r\n *\r\n * Licensed under\r\n *   MIT License http://www.opensource.org/licenses/mit-license\r\n *   GPL v3 http://opensource.org/licenses/GPL-3.0\r\n *\r\n * Date: 2016-01-08T20:22:21.900Z\r\n */\r\n\r\n(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as anonymous module.\r\n        define(['jquery'], factory);\r\n    } else if (typeof exports === 'object') {\r\n        // Node / CommonJS\r\n        factory(require('jquery'));\r\n    } else {\r\n        // Browser globals.\r\n        factory(jQuery);\r\n    }\r\n})(function ($) {\r\n\r\n    'use strict';\r\n\r\n    // TODO: -\r\n    // ARIA stuff: menuitem, menuitemcheckbox und menuitemradio\r\n    // create <menu> structure if $.support[htmlCommand || htmlMenuitem] and !opt.disableNative\r\n\r\n    // determine html5 compatibility\r\n    $.support.htmlMenuitem = ('HTMLMenuItemElement' in window);\r\n    $.support.htmlCommand = ('HTMLCommandElement' in window);\r\n    $.support.eventSelectstart = ('onselectstart' in document.documentElement);\r\n    /* // should the need arise, test for css user-select\r\n     $.support.cssUserSelect = (function(){\r\n     var t = false,\r\n     e = document.createElement('div');\r\n\r\n     $.each('Moz|Webkit|Khtml|O|ms|Icab|'.split('|'), function(i, prefix) {\r\n     var propCC = prefix + (prefix ? 'U' : 'u') + 'serSelect',\r\n     prop = (prefix ? ('-' + prefix.toLowerCase() + '-') : '') + 'user-select';\r\n\r\n     e.style.cssText = prop + ': text;';\r\n     if (e.style[propCC] == 'text') {\r\n     t = true;\r\n     return false;\r\n     }\r\n\r\n     return true;\r\n     });\r\n\r\n     return t;\r\n     })();\r\n     */\r\n\r\n    if (!$.ui || !$.widget) {\r\n        // duck punch $.cleanData like jQueryUI does to get that remove event\r\n        $.cleanData = (function (orig) {\r\n            return function (elems) {\r\n                var events, elem, i;\r\n                for (i = 0; (elem = elems[i]) != null; i++) {\r\n                    try {\r\n                        // Only trigger remove when necessary to save time\r\n                        events = $._data(elem, 'events');\r\n                        if (events && events.remove) {\r\n                            $(elem).triggerHandler('remove');\r\n                        }\r\n\r\n                        // Http://bugs.jquery.com/ticket/8235\r\n                    } catch (e) {}\r\n                }\r\n                orig(elems);\r\n            };\r\n        })($.cleanData);\r\n    }\r\n\r\n    var // currently active contextMenu trigger\r\n        $currentTrigger = null,\r\n    // is contextMenu initialized with at least one menu?\r\n        initialized = false,\r\n    // window handle\r\n        $win = $(window),\r\n    // number of registered menus\r\n        counter = 0,\r\n    // mapping selector to namespace\r\n        namespaces = {},\r\n    // mapping namespace to options\r\n        menus = {},\r\n    // custom command type handlers\r\n        types = {},\r\n    // default values\r\n        defaults = {\r\n            // selector of contextMenu trigger\r\n            selector: null,\r\n            // where to append the menu to\r\n            appendTo: null,\r\n            // method to trigger context menu [\"right\", \"left\", \"hover\"]\r\n            trigger: 'right',\r\n            // hide menu when mouse leaves trigger / menu elements\r\n            autoHide: false,\r\n            // ms to wait before showing a hover-triggered context menu\r\n            delay: 200,\r\n            // flag denoting if a second trigger should simply move (true) or rebuild (false) an open menu\r\n            // as long as the trigger happened on one of the trigger-element's child nodes\r\n            reposition: true,\r\n\r\n            // Default classname configuration to be able avoid conflicts in frameworks\r\n            classNames : {\r\n\r\n                hover: 'context-menu-hover', // Item hover\r\n                disabled: 'context-menu-disabled', // Item disabled\r\n                visible: 'context-menu-visible', // Item visible\r\n                notSelectable: 'context-menu-not-selectable', // Item not selectable\r\n\r\n                icon: 'context-menu-icon',\r\n                iconEdit: 'context-menu-icon-edit',\r\n                iconCut: 'context-menu-icon-cut',\r\n                iconCopy: 'context-menu-icon-copy',\r\n                iconPaste: 'context-menu-icon-paste',\r\n                iconDelete: 'context-menu-icon-delete',\r\n                iconAdd: 'context-menu-icon-add',\r\n                iconQuit: 'context-menu-icon-quit'\r\n            },\r\n\r\n            // determine position to show menu at\r\n            determinePosition: function ($menu) {\r\n                // position to the lower middle of the trigger element\r\n                if ($.ui && $.ui.position) {\r\n                    // .position() is provided as a jQuery UI utility\r\n                    // (...and it won't work on hidden elements)\r\n                    $menu.css('display', 'block').position({\r\n                        my: 'center top',\r\n                        at: 'center bottom',\r\n                        of: this,\r\n                        offset: '0 5',\r\n                        collision: 'fit'\r\n                    }).css('display', 'none');\r\n                } else {\r\n                    // determine contextMenu position\r\n                    var offset = this.offset();\r\n                    offset.top += this.outerHeight();\r\n                    offset.left += this.outerWidth() / 2 - $menu.outerWidth() / 2;\r\n                    $menu.css(offset);\r\n                }\r\n            },\r\n            // position menu\r\n            position: function (opt, x, y) {\r\n                var offset;\r\n                // determine contextMenu position\r\n                if (!x && !y) {\r\n                    opt.determinePosition.call(this, opt.$menu);\r\n                    return;\r\n                } else if (x === 'maintain' && y === 'maintain') {\r\n                    // x and y must not be changed (after re-show on command click)\r\n                    offset = opt.$menu.position();\r\n                } else {\r\n                    // x and y are given (by mouse event)\r\n                    offset = {top: y, left: x};\r\n                }\r\n\r\n                // correct offset if viewport demands it\r\n                var bottom = $win.scrollTop() + $win.height(),\r\n                    right = $win.scrollLeft() + $win.width(),\r\n                    height = opt.$menu.outerHeight(),\r\n                    width = opt.$menu.outerWidth();\r\n\r\n                if (offset.top + height > bottom) {\r\n                    offset.top -= height;\r\n                }\r\n\r\n                if (offset.top < 0) {\r\n                    offset.top = 0;\r\n                }\r\n\r\n                if (offset.left + width > right) {\r\n                    offset.left -= width;\r\n                }\r\n\r\n                if (offset.left < 0) {\r\n                    offset.left = 0;\r\n                }\r\n\r\n                opt.$menu.css(offset);\r\n            },\r\n            // position the sub-menu\r\n            positionSubmenu: function ($menu) {\r\n                if ($.ui && $.ui.position) {\r\n                    // .position() is provided as a jQuery UI utility\r\n                    // (...and it won't work on hidden elements)\r\n                    $menu.css('display', 'block').position({\r\n                        my: 'left top',\r\n                        at: 'right top',\r\n                        of: this,\r\n                        collision: 'flipfit fit'\r\n                    }).css('display', '');\r\n                } else {\r\n                    // determine contextMenu position\r\n                    var offset = {\r\n                        top: 0,\r\n                        left: this.outerWidth()\r\n                    };\r\n                    $menu.css(offset);\r\n                }\r\n            },\r\n            // offset to add to zIndex\r\n            zIndex: 1,\r\n            // show hide animation settings\r\n            animation: {\r\n                duration: 50,\r\n                show: 'slideDown',\r\n                hide: 'slideUp'\r\n            },\r\n            // events\r\n            events: {\r\n                show: $.noop,\r\n                hide: $.noop\r\n            },\r\n            // default callback\r\n            callback: null,\r\n            // list of contextMenu items\r\n            items: {}\r\n        },\r\n    // mouse position for hover activation\r\n        hoveract = {\r\n            timer: null,\r\n            pageX: null,\r\n            pageY: null\r\n        },\r\n    // determine zIndex\r\n        zindex = function ($t) {\r\n            var zin = 0,\r\n                $tt = $t;\r\n\r\n            while (true) {\r\n                zin = Math.max(zin, parseInt($tt.css('z-index'), 10) || 0);\r\n                $tt = $tt.parent();\r\n                if (!$tt || !$tt.length || 'html body'.indexOf($tt.prop('nodeName').toLowerCase()) > -1) {\r\n                    break;\r\n                }\r\n            }\r\n            return zin;\r\n        },\r\n    // event handlers\r\n        handle = {\r\n            // abort anything\r\n            abortevent: function (e) {\r\n                e.preventDefault();\r\n                e.stopImmediatePropagation();\r\n            },\r\n            // contextmenu show dispatcher\r\n            contextmenu: function (e) {\r\n                var $this = $(this);\r\n\r\n                // disable actual context-menu if we are using the right mouse button as the trigger\r\n                if (e.data.trigger === 'right') {\r\n                    e.preventDefault();\r\n                    e.stopImmediatePropagation();\r\n                }\r\n\r\n                // abort native-triggered events unless we're triggering on right click\r\n                if ((e.data.trigger !== 'right' && e.data.trigger !== 'demand') && e.originalEvent) {\r\n                    return;\r\n                }\r\n\r\n                // Let the current contextmenu decide if it should show or not based on its own trigger settings\r\n                if (e.mouseButton !== undefined && e.data) {\r\n                    if (!(e.data.trigger == 'left' && e.mouseButton === 0) && !(e.data.trigger == 'right' && e.mouseButton === 2)) {\r\n                        // Mouse click is not valid.\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                // abort event if menu is visible for this trigger\r\n                if ($this.hasClass('context-menu-active')) {\r\n                    return;\r\n                }\r\n\r\n                if (!$this.hasClass('context-menu-disabled')) {\r\n                    // theoretically need to fire a show event at <menu>\r\n                    // http://www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#context-menus\r\n                    // var evt = jQuery.Event(\"show\", { data: data, pageX: e.pageX, pageY: e.pageY, relatedTarget: this });\r\n                    // e.data.$menu.trigger(evt);\r\n\r\n                    $currentTrigger = $this;\r\n                    if (e.data.build) {\r\n                        var built = e.data.build($currentTrigger, e);\r\n                        // abort if build() returned false\r\n                        if (built === false) {\r\n                            return;\r\n                        }\r\n\r\n                        // dynamically build menu on invocation\r\n                        e.data = $.extend(true, {}, defaults, e.data, built || {});\r\n\r\n                        // abort if there are no items to display\r\n                        if (!e.data.items || $.isEmptyObject(e.data.items)) {\r\n                            // Note: jQuery captures and ignores errors from event handlers\r\n                            if (window.console) {\r\n                                (console.error || console.log).call(console, 'No items specified to show in contextMenu');\r\n                            }\r\n\r\n                            throw new Error('No Items specified');\r\n                        }\r\n\r\n                        // backreference for custom command type creation\r\n                        e.data.$trigger = $currentTrigger;\r\n\r\n                        op.create(e.data);\r\n                    }\r\n                    var showMenu = false;\r\n                    for (var item in e.data.items) {\r\n                        if (e.data.items.hasOwnProperty(item)) {\r\n                            var visible;\r\n                            if ($.isFunction(e.data.items[item].visible)) {\r\n                                visible = e.data.items[item].visible.call($(e.currentTarget), item, e.data);\r\n                            } else if (typeof item.visible !== 'undefined') {\r\n                                visible = e.data.items[item].visible === true;\r\n                            } else {\r\n                                visible = true;\r\n                            }\r\n                            if (visible) {\r\n                                showMenu = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (showMenu) {\r\n                        // show menu\r\n\t\t                var menuContainer = (e.data.appendTo === null ? $('body') : $(e.data.appendTo));\r\n\t\t                var srcElement = e.target || e.srcElement || e.originalTarget;\r\n\t\t                op.show.call($this, e.data,\r\n                \t\t\t\t\t $(srcElement).offset().left - menuContainer.offset().left + e.offsetX,\r\n                \t\t\t\t\t $(srcElement).offset().top - menuContainer.offset().top + e.offsetY);\r\n                    }\r\n                }\r\n            },\r\n            // contextMenu left-click trigger\r\n            click: function (e) {\r\n                e.preventDefault();\r\n                e.stopImmediatePropagation();\r\n                $(this).trigger($.Event('contextmenu', {data: e.data, pageX: e.pageX, pageY: e.pageY}));\r\n            },\r\n            // contextMenu right-click trigger\r\n            mousedown: function (e) {\r\n                // register mouse down\r\n                var $this = $(this);\r\n\r\n                // hide any previous menus\r\n                if ($currentTrigger && $currentTrigger.length && !$currentTrigger.is($this)) {\r\n                    $currentTrigger.data('contextMenu').$menu.trigger('contextmenu:hide');\r\n                }\r\n\r\n                // activate on right click\r\n                if (e.button === 2) {\r\n                    $currentTrigger = $this.data('contextMenuActive', true);\r\n                }\r\n            },\r\n            // contextMenu right-click trigger\r\n            mouseup: function (e) {\r\n                // show menu\r\n                var $this = $(this);\r\n                if ($this.data('contextMenuActive') && $currentTrigger && $currentTrigger.length && $currentTrigger.is($this) && !$this.hasClass('context-menu-disabled')) {\r\n                    e.preventDefault();\r\n                    e.stopImmediatePropagation();\r\n                    $currentTrigger = $this;\r\n                    $this.trigger($.Event('contextmenu', {data: e.data, pageX: e.pageX, pageY: e.pageY}));\r\n                }\r\n\r\n                $this.removeData('contextMenuActive');\r\n            },\r\n            // contextMenu hover trigger\r\n            mouseenter: function (e) {\r\n                var $this = $(this),\r\n                    $related = $(e.relatedTarget),\r\n                    $document = $(document);\r\n\r\n                // abort if we're coming from a menu\r\n                if ($related.is('.context-menu-list') || $related.closest('.context-menu-list').length) {\r\n                    return;\r\n                }\r\n\r\n                // abort if a menu is shown\r\n                if ($currentTrigger && $currentTrigger.length) {\r\n                    return;\r\n                }\r\n\r\n                hoveract.pageX = e.pageX;\r\n                hoveract.pageY = e.pageY;\r\n                hoveract.data = e.data;\r\n                $document.on('mousemove.contextMenuShow', handle.mousemove);\r\n                hoveract.timer = setTimeout(function () {\r\n                    hoveract.timer = null;\r\n                    $document.off('mousemove.contextMenuShow');\r\n                    $currentTrigger = $this;\r\n                    $this.trigger($.Event('contextmenu', {\r\n                        data: hoveract.data,\r\n                        pageX: hoveract.pageX,\r\n                        pageY: hoveract.pageY\r\n                    }));\r\n                }, e.data.delay);\r\n            },\r\n            // contextMenu hover trigger\r\n            mousemove: function (e) {\r\n                hoveract.pageX = e.pageX;\r\n                hoveract.pageY = e.pageY;\r\n            },\r\n            // contextMenu hover trigger\r\n            mouseleave: function (e) {\r\n                // abort if we're leaving for a menu\r\n                var $related = $(e.relatedTarget);\r\n                if ($related.is('.context-menu-list') || $related.closest('.context-menu-list').length) {\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    clearTimeout(hoveract.timer);\r\n                } catch (e) {\r\n                }\r\n\r\n                hoveract.timer = null;\r\n            },\r\n            // click on layer to hide contextMenu\r\n            layerClick: function (e) {\r\n                var $this = $(this),\r\n                    root = $this.data('contextMenuRoot'),\r\n                    button = e.button,\r\n                    x = e.pageX,\r\n                    y = e.pageY,\r\n                    target,\r\n                    offset;\r\n\r\n                e.preventDefault();\r\n                e.stopImmediatePropagation();\r\n\r\n                setTimeout(function () {\r\n                    var $window;\r\n                    var triggerAction = ((root.trigger === 'left' && button === 0) || (root.trigger === 'right' && button === 2));\r\n\r\n                    // find the element that would've been clicked, wasn't the layer in the way\r\n                    if (document.elementFromPoint && root.$layer) {\r\n                        root.$layer.hide();\r\n                        target = document.elementFromPoint(x - $win.scrollLeft(), y - $win.scrollTop());\r\n                        root.$layer.show();\r\n                    }\r\n\r\n                    if (root.reposition && triggerAction) {\r\n                        if (document.elementFromPoint) {\r\n                            if (root.$trigger.is(target) || root.$trigger.has(target).length) {\r\n                                root.position.call(root.$trigger, root, x, y);\r\n                                return;\r\n                            }\r\n                        } else {\r\n                            offset = root.$trigger.offset();\r\n                            $window = $(window);\r\n                            // while this looks kinda awful, it's the best way to avoid\r\n                            // unnecessarily calculating any positions\r\n                            offset.top += $window.scrollTop();\r\n                            if (offset.top <= e.pageY) {\r\n                                offset.left += $window.scrollLeft();\r\n                                if (offset.left <= e.pageX) {\r\n                                    offset.bottom = offset.top + root.$trigger.outerHeight();\r\n                                    if (offset.bottom >= e.pageY) {\r\n                                        offset.right = offset.left + root.$trigger.outerWidth();\r\n                                        if (offset.right >= e.pageX) {\r\n                                            // reposition\r\n                                            root.position.call(root.$trigger, root, x, y);\r\n                                            return;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (target && triggerAction) {\r\n                        root.$trigger.one('contextmenu:hidden', function () {\r\n                            $(target).contextMenu({ x: x, y: y, button: button });\r\n                        });\r\n                    }\r\n\r\n                    root.$menu.trigger('contextmenu:hide');\r\n                }, 50);\r\n            },\r\n            // key handled :hover\r\n            keyStop: function (e, opt) {\r\n                if (!opt.isInput) {\r\n                    e.preventDefault();\r\n                }\r\n\r\n                e.stopPropagation();\r\n            },\r\n            key: function (e) {\r\n\r\n                var opt = {};\r\n\r\n                // Only get the data from $currentTrigger if it exists\r\n                if ($currentTrigger) {\r\n                    opt = $currentTrigger.data('contextMenu') || {};\r\n                }\r\n                // If the trigger happen on a element that are above the contextmenu do this\r\n                if (opt.zIndex === undefined) {\r\n                    opt.zIndex = 0;\r\n\t\t\t\t}\r\n                var targetZIndex = 0;\r\n                var getZIndexOfTriggerTarget = function (target) {\r\n\t\t\t\t\tif (target.style.zIndex !== '') {\r\n\t\t\t\t\t\ttargetZIndex = target.style.zIndex;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (target.offsetParent !== null && target.offsetParent !== undefined) {\r\n\t\t\t\t\t\t\tgetZIndexOfTriggerTarget(target.offsetParent);\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\telse if (target.parentElement !== null && target.parentElement !== undefined) {\r\n\t\t\t\t\t\t\tgetZIndexOfTriggerTarget(target.parentElement);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n                };\r\n                getZIndexOfTriggerTarget(e.target);\r\n                // If targetZIndex is heigher then opt.zIndex dont progress any futher.\r\n                // This is used to make sure that if you are using a dialog with a input / textarea / contenteditable div\r\n                // and its above the contextmenu it wont steal keys events\r\n                if (targetZIndex > opt.zIndex) {\r\n                    return;\r\n\t\t\t\t}\r\n                switch (e.keyCode) {\r\n                    case 9:\r\n                    case 38: // up\r\n                        handle.keyStop(e, opt);\r\n                        // if keyCode is [38 (up)] or [9 (tab) with shift]\r\n                        if (opt.isInput) {\r\n                            if (e.keyCode === 9 && e.shiftKey) {\r\n                                e.preventDefault();\r\n                                opt.$selected && opt.$selected.find('input, textarea, select').blur();\r\n                                opt.$menu.trigger('prevcommand');\r\n                                return;\r\n                            } else if (e.keyCode === 38 && opt.$selected.find('input, textarea, select').prop('type') === 'checkbox') {\r\n                                // checkboxes don't capture this key\r\n                                e.preventDefault();\r\n                                return;\r\n                            }\r\n                        } else if (e.keyCode !== 9 || e.shiftKey) {\r\n                            opt.$menu.trigger('prevcommand');\r\n                            return;\r\n                        }\r\n                    // omitting break;\r\n                    // case 9: // tab - reached through omitted break;\r\n                    case 40: // down\r\n                        handle.keyStop(e, opt);\r\n                        if (opt.isInput) {\r\n                            if (e.keyCode === 9) {\r\n                                e.preventDefault();\r\n                                opt.$selected && opt.$selected.find('input, textarea, select').blur();\r\n                                opt.$menu.trigger('nextcommand');\r\n                                return;\r\n                            } else if (e.keyCode === 40 && opt.$selected.find('input, textarea, select').prop('type') === 'checkbox') {\r\n                                // checkboxes don't capture this key\r\n                                e.preventDefault();\r\n                                return;\r\n                            }\r\n                        } else {\r\n                            opt.$menu.trigger('nextcommand');\r\n                            return;\r\n                        }\r\n                        break;\r\n\r\n                    case 37: // left\r\n                        handle.keyStop(e, opt);\r\n                        if (opt.isInput || !opt.$selected || !opt.$selected.length) {\r\n                            break;\r\n                        }\r\n\r\n                        if (!opt.$selected.parent().hasClass('context-menu-root')) {\r\n                            var $parent = opt.$selected.parent().parent();\r\n                            opt.$selected.trigger('contextmenu:blur');\r\n                            opt.$selected = $parent;\r\n                            return;\r\n                        }\r\n                        break;\r\n\r\n                    case 39: // right\r\n                        handle.keyStop(e, opt);\r\n                        if (opt.isInput || !opt.$selected || !opt.$selected.length) {\r\n                            break;\r\n                        }\r\n\r\n                        var itemdata = opt.$selected.data('contextMenu') || {};\r\n                        if (itemdata.$menu && opt.$selected.hasClass('context-menu-submenu')) {\r\n                            opt.$selected = null;\r\n                            itemdata.$selected = null;\r\n                            itemdata.$menu.trigger('nextcommand');\r\n                            return;\r\n                        }\r\n                        break;\r\n\r\n                    case 35: // end\r\n                    case 36: // home\r\n                        if (opt.$selected && opt.$selected.find('input, textarea, select').length) {\r\n                            return;\r\n                        } else {\r\n                            (opt.$selected && opt.$selected.parent() || opt.$menu)\r\n                                .children(':not(.' + opt.classNames.disabled + ', .' + opt.classNames.notSelectable + ')')[e.keyCode === 36 ? 'first' : 'last']()\r\n                                .trigger('contextmenu:focus');\r\n                            e.preventDefault();\r\n                            return;\r\n                        }\r\n                        break;\r\n\r\n                    case 13: // enter\r\n                        handle.keyStop(e, opt);\r\n                        if (opt.isInput) {\r\n                            if (opt.$selected && !opt.$selected.is('textarea, select')) {\r\n                                e.preventDefault();\r\n                                return;\r\n                            }\r\n                            break;\r\n                        }\r\n                        if (typeof opt.$selected !== 'undefined' && opt.$selected !== null) {\r\n                            opt.$selected.trigger('mouseup');\r\n                        }\r\n                        return;\r\n\r\n                    case 32: // space\r\n                    case 33: // page up\r\n                    case 34: // page down\r\n                        // prevent browser from scrolling down while menu is visible\r\n                        handle.keyStop(e, opt);\r\n                        return;\r\n\r\n                    case 27: // esc\r\n                        handle.keyStop(e, opt);\r\n                        opt.$menu.trigger('contextmenu:hide');\r\n                        return;\r\n\r\n                    default: // 0-9, a-z\r\n                        var k = (String.fromCharCode(e.keyCode)).toUpperCase();\r\n                        if (opt.accesskeys && opt.accesskeys[k]) {\r\n                            // according to the specs accesskeys must be invoked immediately\r\n                            opt.accesskeys[k].$node.trigger(opt.accesskeys[k].$menu ? 'contextmenu:focus' : 'mouseup');\r\n                            return;\r\n                        }\r\n                        break;\r\n                }\r\n                // pass event to selected item,\r\n                // stop propagation to avoid endless recursion\r\n                e.stopPropagation();\r\n                if (typeof opt.$selected !== 'undefined' && opt.$selected !== null) {\r\n                    opt.$selected.trigger(e);\r\n                }\r\n            },\r\n            // select previous possible command in menu\r\n            prevItem: function (e) {\r\n                e.stopPropagation();\r\n                var opt = $(this).data('contextMenu') || {};\r\n                var root = $(this).data('contextMenuRoot') || {};\r\n\r\n                // obtain currently selected menu\r\n                if (opt.$selected) {\r\n                    var $s = opt.$selected;\r\n                    opt = opt.$selected.parent().data('contextMenu') || {};\r\n                    opt.$selected = $s;\r\n                }\r\n\r\n                var $children = opt.$menu.children(),\r\n                    $prev = !opt.$selected || !opt.$selected.prev().length ? $children.last() : opt.$selected.prev(),\r\n                    $round = $prev;\r\n\r\n                // skip disabled\r\n                while ($prev.hasClass(root.classNames.disabled) || $prev.hasClass(root.classNames.notSelectable)) {\r\n                    if ($prev.prev().length) {\r\n                        $prev = $prev.prev();\r\n                    } else {\r\n                        $prev = $children.last();\r\n                    }\r\n                    if ($prev.is($round)) {\r\n                        // break endless loop\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                // leave current\r\n                if (opt.$selected) {\r\n                    handle.itemMouseleave.call(opt.$selected.get(0), e);\r\n                }\r\n\r\n                // activate next\r\n                handle.itemMouseenter.call($prev.get(0), e);\r\n\r\n                // focus input\r\n                var $input = $prev.find('input, textarea, select');\r\n                if ($input.length) {\r\n                    $input.focus();\r\n                }\r\n            },\r\n            // select next possible command in menu\r\n            nextItem: function (e) {\r\n                e.stopPropagation();\r\n                var opt = $(this).data('contextMenu') || {};\r\n                var root = $(this).data('contextMenuRoot') || {};\r\n\r\n                // obtain currently selected menu\r\n                if (opt.$selected) {\r\n                    var $s = opt.$selected;\r\n                    opt = opt.$selected.parent().data('contextMenu') || {};\r\n                    opt.$selected = $s;\r\n                }\r\n\r\n                var $children = opt.$menu.children(),\r\n                    $next = !opt.$selected || !opt.$selected.next().length ? $children.first() : opt.$selected.next(),\r\n                    $round = $next;\r\n\r\n                // skip disabled\r\n                while ($next.hasClass(root.classNames.disabled) || $next.hasClass(root.classNames.notSelectable)) {\r\n                    if ($next.next().length) {\r\n                        $next = $next.next();\r\n                    } else {\r\n                        $next = $children.first();\r\n                    }\r\n                    if ($next.is($round)) {\r\n                        // break endless loop\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                // leave current\r\n                if (opt.$selected) {\r\n                    handle.itemMouseleave.call(opt.$selected.get(0), e);\r\n                }\r\n\r\n                // activate next\r\n                handle.itemMouseenter.call($next.get(0), e);\r\n\r\n                // focus input\r\n                var $input = $next.find('input, textarea, select');\r\n                if ($input.length) {\r\n                    $input.focus();\r\n                }\r\n            },\r\n            // flag that we're inside an input so the key handler can act accordingly\r\n            focusInput: function () {\r\n                var $this = $(this).closest('.context-menu-item'),\r\n                    data = $this.data(),\r\n                    opt = data.contextMenu,\r\n                    root = data.contextMenuRoot;\r\n\r\n                root.$selected = opt.$selected = $this;\r\n                root.isInput = opt.isInput = true;\r\n            },\r\n            // flag that we're inside an input so the key handler can act accordingly\r\n            blurInput: function () {\r\n                var $this = $(this).closest('.context-menu-item'),\r\n                    data = $this.data(),\r\n                    opt = data.contextMenu,\r\n                    root = data.contextMenuRoot;\r\n\r\n                root.isInput = opt.isInput = false;\r\n            },\r\n            // :hover on menu\r\n            menuMouseenter: function () {\r\n                var root = $(this).data().contextMenuRoot;\r\n                root.hovering = true;\r\n            },\r\n            // :hover on menu\r\n            menuMouseleave: function (e) {\r\n                var root = $(this).data().contextMenuRoot;\r\n                if (root.$layer && root.$layer.is(e.relatedTarget)) {\r\n                    root.hovering = false;\r\n                }\r\n            },\r\n            // :hover done manually so key handling is possible\r\n            itemMouseenter: function (e) {\r\n                var $this = $(this),\r\n                    data = $this.data(),\r\n                    opt = data.contextMenu,\r\n                    root = data.contextMenuRoot;\r\n\r\n                root.hovering = true;\r\n\r\n                // abort if we're re-entering\r\n                if (e && root.$layer && root.$layer.is(e.relatedTarget)) {\r\n                    e.preventDefault();\r\n                    e.stopImmediatePropagation();\r\n                }\r\n\r\n                // make sure only one item is selected\r\n                (opt.$menu ? opt : root).$menu\r\n                    .children('.hover').trigger('contextmenu:blur');\r\n\r\n                if ($this.hasClass(root.classNames.disabled) || $this.hasClass(root.classNames.notSelectable)) {\r\n                    opt.$selected = null;\r\n                    return;\r\n                }\r\n\r\n                $this.trigger('contextmenu:focus');\r\n            },\r\n            // :hover done manually so key handling is possible\r\n            itemMouseleave: function (e) {\r\n                var $this = $(this),\r\n                    data = $this.data(),\r\n                    opt = data.contextMenu,\r\n                    root = data.contextMenuRoot;\r\n\r\n                if (root !== opt && root.$layer && root.$layer.is(e.relatedTarget)) {\r\n                    if (typeof root.$selected !== 'undefined' && root.$selected !== null) {\r\n                        root.$selected.trigger('contextmenu:blur');\r\n                    }\r\n                    e.preventDefault();\r\n                    e.stopImmediatePropagation();\r\n                    root.$selected = opt.$selected = opt.$node;\r\n                    return;\r\n                }\r\n\r\n                $this.trigger('contextmenu:blur');\r\n            },\r\n            // contextMenu item click\r\n            itemClick: function (e) {\r\n                var $this = $(this),\r\n                    data = $this.data(),\r\n                    opt = data.contextMenu,\r\n                    root = data.contextMenuRoot,\r\n                    key = data.contextMenuKey,\r\n                    callback;\r\n\r\n                // abort if the key is unknown or disabled or is a menu\r\n                if (!opt.items[key] || $this.is('.' + root.classNames.disabled + ', .context-menu-submenu, .context-menu-separator, .' + root.classNames.notSelectable)) {\r\n                    return;\r\n                }\r\n\r\n                e.preventDefault();\r\n                e.stopImmediatePropagation();\r\n\r\n                if ($.isFunction(root.callbacks[key]) && Object.prototype.hasOwnProperty.call(root.callbacks, key)) {\r\n                    // item-specific callback\r\n                    callback = root.callbacks[key];\r\n                } else if ($.isFunction(root.callback)) {\r\n                    // default callback\r\n                    callback = root.callback;\r\n                } else {\r\n                    // no callback, no action\r\n                    return;\r\n                }\r\n\r\n                // hide menu if callback doesn't stop that\r\n                if (callback.call(root.$trigger, key, root) !== false) {\r\n                    root.$menu.trigger('contextmenu:hide');\r\n                } else if (root.$menu.parent().length) {\r\n                    op.update.call(root.$trigger, root);\r\n                }\r\n            },\r\n            // ignore click events on input elements\r\n            inputClick: function (e) {\r\n                e.stopImmediatePropagation();\r\n            },\r\n            // hide <menu>\r\n            hideMenu: function (e, data) {\r\n                var root = $(this).data('contextMenuRoot');\r\n                op.hide.call(root.$trigger, root, data && data.force);\r\n            },\r\n            // focus <command>\r\n            focusItem: function (e) {\r\n                e.stopPropagation();\r\n                var $this = $(this),\r\n                    data = $this.data(),\r\n                    opt = data.contextMenu,\r\n                    root = data.contextMenuRoot;\r\n\r\n                $this\r\n                    .addClass([root.classNames.hover, root.classNames.visible].join(' '))\r\n                    .siblings()\r\n                    .removeClass(root.classNames.visible)\r\n                    .filter(root.classNames.hover)\r\n                    .trigger('contextmenu:blur');\r\n\r\n                // remember selected\r\n                opt.$selected = root.$selected = $this;\r\n\r\n                // position sub-menu - do after show so dumb $.ui.position can keep up\r\n                if (opt.$node) {\r\n                    root.positionSubmenu.call(opt.$node, opt.$menu);\r\n                }\r\n            },\r\n            // blur <command>\r\n            blurItem: function (e) {\r\n                e.stopPropagation();\r\n                var $this = $(this),\r\n                    data = $this.data(),\r\n                    opt = data.contextMenu,\r\n                    root = data.contextMenuRoot;\r\n\r\n                if (opt.autoHide) { // for tablets and touch screens this needs to remain\r\n                    $this.removeClass(root.classNames.visible);\r\n                }\r\n                $this.removeClass(root.classNames.hover);\r\n                opt.$selected = null;\r\n            }\r\n        },\r\n    // operations\r\n        op = {\r\n            show: function (opt, x, y) {\r\n                var $trigger = $(this),\r\n                    css = {};\r\n\r\n                // hide any open menus\r\n                $('#context-menu-layer').trigger('mousedown');\r\n\r\n                // backreference for callbacks\r\n                opt.$trigger = $trigger;\r\n\r\n                // show event\r\n                if (opt.events.show.call($trigger, opt) === false) {\r\n                    $currentTrigger = null;\r\n                    return;\r\n                }\r\n\r\n                // create or update context menu\r\n                op.update.call($trigger, opt);\r\n\r\n                // position menu\r\n                opt.position.call($trigger, opt, x, y);\r\n\r\n                // make sure we're in front\r\n                if (opt.zIndex) {\r\n                  var additionalZValue = opt.zIndex;\r\n                  // If opt.zIndex is a function, call the function to get the right zIndex.\r\n                  if (typeof opt.zIndex === 'function') {\r\n                      additionalZValue = opt.zIndex.call($trigger, opt);\r\n                  }\r\n                  css.zIndex = zindex($trigger) + additionalZValue;\r\n                }\r\n\r\n                // add layer\r\n                op.layer.call(opt.$menu, opt, css.zIndex);\r\n\r\n                // adjust sub-menu zIndexes\r\n                opt.$menu.find('ul').css('zIndex', css.zIndex + 1);\r\n\r\n                // position and show context menu\r\n                opt.$menu.css(css)[opt.animation.show](opt.animation.duration, function () {\r\n                    $trigger.trigger('contextmenu:visible');\r\n                });\r\n                // make options available and set state\r\n                $trigger\r\n                    .data('contextMenu', opt)\r\n                    .addClass('context-menu-active');\r\n\r\n                // register key handler\r\n                $(document).off('keydown.contextMenu').on('keydown.contextMenu', handle.key);\r\n                // register autoHide handler\r\n                if (opt.autoHide) {\r\n                    // mouse position handler\r\n                    $(document).on('mousemove.contextMenuAutoHide', function (e) {\r\n                        // need to capture the offset on mousemove,\r\n                        // since the page might've been scrolled since activation\r\n                        var pos = $trigger.offset();\r\n                        pos.right = pos.left + $trigger.outerWidth();\r\n                        pos.bottom = pos.top + $trigger.outerHeight();\r\n\r\n                        if (opt.$layer && !opt.hovering && (!(e.pageX >= pos.left && e.pageX <= pos.right) || !(e.pageY >= pos.top && e.pageY <= pos.bottom))) {\r\n                            // if mouse in menu...\r\n                            opt.$menu.trigger('contextmenu:hide');\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n            hide: function (opt, force) {\r\n                var $trigger = $(this);\r\n                if (!opt) {\r\n                    opt = $trigger.data('contextMenu') || {};\r\n                }\r\n\r\n                // hide event\r\n                if (!force && opt.events && opt.events.hide.call($trigger, opt) === false) {\r\n                    return;\r\n                }\r\n\r\n                // remove options and revert state\r\n                $trigger\r\n                    .removeData('contextMenu')\r\n                    .removeClass('context-menu-active');\r\n\r\n                if (opt.$layer) {\r\n                    // keep layer for a bit so the contextmenu event can be aborted properly by opera\r\n                    setTimeout((function ($layer) {\r\n                        return function () {\r\n                            $layer.remove();\r\n                        };\r\n                    })(opt.$layer), 10);\r\n\r\n                    try {\r\n                        delete opt.$layer;\r\n                    } catch (e) {\r\n                        opt.$layer = null;\r\n                    }\r\n                }\r\n\r\n                // remove handle\r\n                $currentTrigger = null;\r\n                // remove selected\r\n                opt.$menu.find('.' + opt.classNames.hover).trigger('contextmenu:blur');\r\n                opt.$selected = null;\r\n                // unregister key and mouse handlers\r\n                // $(document).off('.contextMenuAutoHide keydown.contextMenu'); // http://bugs.jquery.com/ticket/10705\r\n                $(document).off('.contextMenuAutoHide').off('keydown.contextMenu');\r\n                // hide menu\r\n                opt.$menu && opt.$menu[opt.animation.hide](opt.animation.duration, function () {\r\n                    // tear down dynamically built menu after animation is completed.\r\n                    if (opt.build) {\r\n                        opt.$menu.remove();\r\n                        $.each(opt, function (key) {\r\n                            switch (key) {\r\n                                case 'ns':\r\n                                case 'selector':\r\n                                case 'build':\r\n                                case 'trigger':\r\n                                    return true;\r\n\r\n                                default:\r\n                                    opt[key] = undefined;\r\n                                    try {\r\n                                        delete opt[key];\r\n                                    } catch (e) {\r\n                                    }\r\n                                    return true;\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    setTimeout(function () {\r\n                        $trigger.trigger('contextmenu:hidden');\r\n                    }, 10);\r\n                });\r\n            },\r\n            create: function (opt, root) {\r\n                if (root === undefined) {\r\n                    root = opt;\r\n                }\r\n                // create contextMenu\r\n                opt.$menu = $('<ul class=\"context-menu-list\"></ul>').addClass(opt.className || '').data({\r\n                    'contextMenu': opt,\r\n                    'contextMenuRoot': root\r\n                });\r\n\r\n                $.each(['callbacks', 'commands', 'inputs'], function (i, k) {\r\n                    opt[k] = {};\r\n                    if (!root[k]) {\r\n                        root[k] = {};\r\n                    }\r\n                });\r\n\r\n                root.accesskeys || (root.accesskeys = {});\r\n\r\n                function createNameNode(item) {\r\n                    var $name = $('<span></span>');\r\n                    if (item._accesskey) {\r\n                        if (item._beforeAccesskey) {\r\n                            $name.append(document.createTextNode(item._beforeAccesskey));\r\n                        }\r\n                        $('<span></span>')\r\n                            .addClass('context-menu-accesskey')\r\n                            .text(item._accesskey)\r\n                            .appendTo($name);\r\n                        if (item._afterAccesskey) {\r\n                            $name.append(document.createTextNode(item._afterAccesskey));\r\n                        }\r\n                    } else {\r\n                        $name.text(item.name);\r\n                    }\r\n                    return $name;\r\n                }\r\n\r\n                // create contextMenu items\r\n                $.each(opt.items, function (key, item) {\r\n                    var $t = $('<li class=\"context-menu-item\"></li>').addClass(item.className || ''),\r\n                        $label = null,\r\n                        $input = null;\r\n\r\n                    // iOS needs to see a click-event bound to an element to actually\r\n                    // have the TouchEvents infrastructure trigger the click event\r\n                    $t.on('click', $.noop);\r\n\r\n                    // Make old school string seperator a real item so checks wont be\r\n                    // akward later.\r\n                    if (typeof item === 'string') {\r\n                        item = { type : 'cm_seperator' };\r\n                    }\r\n\r\n                    item.$node = $t.data({\r\n                        'contextMenu': opt,\r\n                        'contextMenuRoot': root,\r\n                        'contextMenuKey': key\r\n                    });\r\n\r\n                    // register accesskey\r\n                    // NOTE: the accesskey attribute should be applicable to any element, but Safari5 and Chrome13 still can't do that\r\n                    if (typeof item.accesskey !== 'undefined') {\r\n                        var aks = splitAccesskey(item.accesskey);\r\n                        for (var i = 0, ak; ak = aks[i]; i++) {\r\n                            if (!root.accesskeys[ak]) {\r\n                                root.accesskeys[ak] = item;\r\n                                var matched = item.name.match(new RegExp('^(.*?)(' + ak + ')(.*)$', 'i'));\r\n                                if (matched) {\r\n                                    item._beforeAccesskey = matched[1];\r\n                                    item._accesskey = matched[2];\r\n                                    item._afterAccesskey = matched[3];\r\n                                }\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (item.type && types[item.type]) {\r\n                        // run custom type handler\r\n                        types[item.type].call($t, item, opt, root);\r\n                        // register commands\r\n                        $.each([opt, root], function (i, k) {\r\n                            k.commands[key] = item;\r\n                            if ($.isFunction(item.callback)) {\r\n                                k.callbacks[key] = item.callback;\r\n                            }\r\n                        });\r\n                    } else {\r\n                        // add label for input\r\n                        if (item.type === 'cm_seperator') {\r\n                            $t.addClass('context-menu-separator ' + root.classNames.notSelectable);\r\n                        } else if (item.type === 'html') {\r\n                            $t.addClass('context-menu-html ' + root.classNames.notSelectable);\r\n                        } else if (item.type) {\r\n                            $label = $('<label></label>').appendTo($t);\r\n                            createNameNode(item).appendTo($label);\r\n\r\n                            $t.addClass('context-menu-input');\r\n                            opt.hasTypes = true;\r\n                            $.each([opt, root], function (i, k) {\r\n                                k.commands[key] = item;\r\n                                k.inputs[key] = item;\r\n                            });\r\n                        } else if (item.items) {\r\n                            item.type = 'sub';\r\n                        }\r\n\r\n                        switch (item.type) {\r\n                            case 'cm_seperator':\r\n                                break;\r\n\r\n                            case 'text':\r\n                                $input = $('<input type=\"text\" value=\"1\" name=\"\" value=\"\">')\r\n                                    .attr('name', 'context-menu-input-' + key)\r\n                                    .val(item.value || '')\r\n                                    .appendTo($label);\r\n                                break;\r\n\r\n                            case 'textarea':\r\n                                $input = $('<textarea name=\"\"></textarea>')\r\n                                    .attr('name', 'context-menu-input-' + key)\r\n                                    .val(item.value || '')\r\n                                    .appendTo($label);\r\n\r\n                                if (item.height) {\r\n                                    $input.height(item.height);\r\n                                }\r\n                                break;\r\n\r\n                            case 'checkbox':\r\n                                $input = $('<input type=\"checkbox\" value=\"1\" name=\"\" value=\"\">')\r\n                                    .attr('name', 'context-menu-input-' + key)\r\n                                    .val(item.value || '')\r\n                                    .prop('checked', !!item.selected)\r\n                                    .prependTo($label);\r\n                                break;\r\n\r\n                            case 'radio':\r\n                                $input = $('<input type=\"radio\" value=\"1\" name=\"\" value=\"\">')\r\n                                    .attr('name', 'context-menu-input-' + item.radio)\r\n                                    .val(item.value || '')\r\n                                    .prop('checked', !!item.selected)\r\n                                    .prependTo($label);\r\n                                break;\r\n\r\n                            case 'select':\r\n                                $input = $('<select name=\"\">')\r\n                                    .attr('name', 'context-menu-input-' + key)\r\n                                    .appendTo($label);\r\n                                if (item.options) {\r\n                                    $.each(item.options, function (value, text) {\r\n                                        $('<option></option>').val(value).text(text).appendTo($input);\r\n                                    });\r\n                                    $input.val(item.selected);\r\n                                }\r\n                                break;\r\n\r\n                            case 'sub':\r\n                                createNameNode(item).appendTo($t);\r\n\r\n                                item.appendTo = item.$node;\r\n                                op.create(item, root);\r\n                                $t.data('contextMenu', item).addClass('context-menu-submenu');\r\n                                item.callback = null;\r\n                                break;\r\n\r\n                            case 'html':\r\n                                $(item.html).appendTo($t);\r\n                                break;\r\n\r\n                            default:\r\n                                $.each([opt, root], function (i, k) {\r\n                                    k.commands[key] = item;\r\n                                    if ($.isFunction(item.callback)) {\r\n                                        k.callbacks[key] = item.callback;\r\n                                    }\r\n                                });\r\n                                createNameNode(item).appendTo($t);\r\n                                break;\r\n                        }\r\n\r\n                        // disable key listener in <input>\r\n                        if (item.type && item.type !== 'sub' && item.type !== 'html' && item.type !== 'cm_seperator') {\r\n                            $input\r\n                                .on('focus', handle.focusInput)\r\n                                .on('blur', handle.blurInput);\r\n\r\n                            if (item.events) {\r\n                                $input.on(item.events, opt);\r\n                            }\r\n                        }\r\n\r\n                        // add icons\r\n                        if (item.icon) {\r\n                            if ($.isFunction(item.icon)) {\r\n                                item._icon = item.icon.call(this, this, $t, key, item);\r\n                            } else {\r\n                                item._icon = root.classNames.icon + ' ' + root.classNames.icon + '-' + item.icon;\r\n                            }\r\n                            $t.addClass(item._icon);\r\n                        }\r\n                    }\r\n\r\n                    // cache contained elements\r\n                    item.$input = $input;\r\n                    item.$label = $label;\r\n\r\n                    // attach item to menu\r\n                    $t.appendTo(opt.$menu);\r\n\r\n                    // Disable text selection\r\n                    if (!opt.hasTypes && $.support.eventSelectstart) {\r\n                        // browsers support user-select: none,\r\n                        // IE has a special event for text-selection\r\n                        // browsers supporting neither will not be preventing text-selection\r\n                        $t.on('selectstart.disableTextSelect', handle.abortevent);\r\n                    }\r\n                });\r\n                // attach contextMenu to <body> (to bypass any possible overflow:hidden issues on parents of the trigger element)\r\n                if (!opt.$node) {\r\n                    opt.$menu.css('display', 'none').addClass('context-menu-root');\r\n                }\r\n                opt.$menu.appendTo(opt.appendTo || document.body);\r\n            },\r\n            resize: function ($menu, nested) {\r\n                // determine widths of submenus, as CSS won't grow them automatically\r\n                // position:absolute within position:absolute; min-width:100; max-width:200; results in width: 100;\r\n                // kinda sucks hard...\r\n\r\n                // determine width of absolutely positioned element\r\n                $menu.css({position: 'absolute', display: 'block'});\r\n                // don't apply yet, because that would break nested elements' widths\r\n                $menu.data('width', Math.ceil($menu.outerWidth()));\r\n                // reset styles so they allow nested elements to grow/shrink naturally\r\n                $menu.css({\r\n                    position: 'static',\r\n                    minWidth: '0px',\r\n                    maxWidth: '100000px'\r\n                });\r\n                // identify width of nested menus\r\n                $menu.find('> li > ul').each(function () {\r\n                    op.resize($(this), true);\r\n                });\r\n                // reset and apply changes in the end because nested\r\n                // elements' widths wouldn't be calculatable otherwise\r\n                if (!nested) {\r\n                    $menu.find('ul').addBack().css({\r\n                        position: '',\r\n                        display: '',\r\n                        minWidth: '',\r\n                        maxWidth: ''\r\n                    }).width(function () {\r\n                        return $(this).data('width');\r\n                    });\r\n                }\r\n            },\r\n            update: function (opt, root) {\r\n                var $trigger = this;\r\n                if (root === undefined) {\r\n                    root = opt;\r\n                    op.resize(opt.$menu);\r\n                }\r\n                // re-check disabled for each item\r\n                opt.$menu.children().each(function () {\r\n                    var $item = $(this),\r\n                        key = $item.data('contextMenuKey'),\r\n                        item = opt.items[key],\r\n                        disabled = ($.isFunction(item.disabled) && item.disabled.call($trigger, key, root)) || item.disabled === true,\r\n                        visible;\r\n                    if ($.isFunction(item.visible)) {\r\n                        visible = item.visible.call($trigger, key, root);\r\n                    } else if (typeof item.visible !== 'undefined') {\r\n                        visible = item.visible === true;\r\n                    } else {\r\n                        visible = true;\r\n                    }\r\n                    $item[visible ? 'show' : 'hide']();\r\n\r\n                    // dis- / enable item\r\n                    $item[disabled ? 'addClass' : 'removeClass'](root.classNames.disabled);\r\n\r\n                    if ($.isFunction(item.icon)) {\r\n                        $item.removeClass(item._icon);\r\n                        item._icon = item.icon.call(this, $trigger, $item, key, item);\r\n                        $item.addClass(item._icon);\r\n                    }\r\n\r\n                    if (item.type) {\r\n                        // dis- / enable input elements\r\n                        $item.find('input, select, textarea').prop('disabled', disabled);\r\n\r\n                        // update input states\r\n                        switch (item.type) {\r\n                            case 'text':\r\n                            case 'textarea':\r\n                                item.$input.val(item.value || '');\r\n                                break;\r\n\r\n                            case 'checkbox':\r\n                            case 'radio':\r\n                                item.$input.val(item.value || '').prop('checked', !!item.selected);\r\n                                break;\r\n\r\n                            case 'select':\r\n                                item.$input.val(item.selected || '');\r\n                                break;\r\n                        }\r\n                    }\r\n\r\n                    if (item.$menu) {\r\n                        // update sub-menu\r\n                        op.update.call($trigger, item, root);\r\n                    }\r\n                });\r\n            },\r\n            layer: function (opt, zIndex) {\r\n                // add transparent layer for click area\r\n                // filter and background for Internet Explorer, Issue #23\r\n                var $layer = opt.$layer = $('<div id=\"context-menu-layer\" style=\"position:fixed; z-index:' + zIndex + '; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;\"></div>')\r\n                    .css({height: $win.height(), width: $win.width(), display: 'block'})\r\n                    .data('contextMenuRoot', opt)\r\n                    .insertBefore(this)\r\n                    .on('contextmenu', handle.abortevent)\r\n                    .on('mousedown', handle.layerClick);\r\n\r\n                // IE6 doesn't know position:fixed;\r\n                if (document.body.style.maxWidth === undefined) { // IE6 doesn't support maxWidth\r\n                    $layer.css({\r\n                        'position': 'absolute',\r\n                        'height': $(document).height()\r\n                    });\r\n                }\r\n\r\n                return $layer;\r\n            }\r\n        };\r\n\r\n    // split accesskey according to http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#assigned-access-key\r\n    function splitAccesskey(val) {\r\n        var t = val.split(/\\s+/),\r\n            keys = [];\r\n\r\n        for (var i = 0, k; k = t[i]; i++) {\r\n            k = k.charAt(0).toUpperCase(); // first character only\r\n            // theoretically non-accessible characters should be ignored, but different systems, different keyboard layouts, ... screw it.\r\n            // a map to look up already used access keys would be nice\r\n            keys.push(k);\r\n        }\r\n\r\n        return keys;\r\n    }\r\n\r\n// handle contextMenu triggers\r\n    $.fn.contextMenu = function (operation) {\r\n        var $t = this, $o = operation;\r\n        if (this.length > 0) {  // this is not a build on demand menu\r\n            if (operation === undefined) {\r\n                this.first().trigger('contextmenu');\r\n            } else if (operation.x !== undefined && operation.y !== undefined) {\r\n                this.first().trigger($.Event('contextmenu', { pageX: operation.x, pageY: operation.y, mouseButton: operation.button }));\r\n            } else if (operation === 'hide') {\r\n                var $menu = this.first().data('contextMenu') ? this.first().data('contextMenu').$menu : null;\r\n                $menu && $menu.trigger('contextmenu:hide');\r\n            } else if (operation === 'destroy') {\r\n                $.contextMenu('destroy', {context: this});\r\n            } else if ($.isPlainObject(operation)) {\r\n                operation.context = this;\r\n                $.contextMenu('create', operation);\r\n            } else if (operation) {\r\n                this.removeClass('context-menu-disabled');\r\n            } else if (!operation) {\r\n                this.addClass('context-menu-disabled');\r\n            }\r\n        } else {\r\n            $.each(menus, function () {\r\n                if (this.selector === $t.selector) {\r\n                    $o.data = this;\r\n\r\n                    $.extend($o.data, {trigger: 'demand'});\r\n                }\r\n            });\r\n\r\n            handle.contextmenu.call($o.target, $o);\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n    // manage contextMenu instances\r\n    $.contextMenu = function (operation, options) {\r\n        if (typeof operation !== 'string') {\r\n            options = operation;\r\n            operation = 'create';\r\n        }\r\n\r\n        if (typeof options === 'string') {\r\n            options = {selector: options};\r\n        } else if (options === undefined) {\r\n            options = {};\r\n        }\r\n\r\n        // merge with default options\r\n        var o = $.extend(true, {}, defaults, options || {});\r\n        var $document = $(document);\r\n        var $context = $document;\r\n        var _hasContext = false;\r\n\r\n        if (!o.context || !o.context.length) {\r\n            o.context = document;\r\n        } else {\r\n            // you never know what they throw at you...\r\n            $context = $(o.context).first();\r\n            o.context = $context.get(0);\r\n            _hasContext = o.context !== document;\r\n        }\r\n\r\n        switch (operation) {\r\n            case 'create':\r\n                // no selector no joy\r\n                if (!o.selector) {\r\n                    throw new Error('No selector specified');\r\n                }\r\n                // make sure internal classes are not bound to\r\n                if (o.selector.match(/.context-menu-(list|item|input)($|\\s)/)) {\r\n                    throw new Error('Cannot bind to selector \"' + o.selector + '\" as it contains a reserved className');\r\n                }\r\n                if (!o.build && (!o.items || $.isEmptyObject(o.items))) {\r\n                    throw new Error('No Items specified');\r\n                }\r\n                counter++;\r\n                o.ns = '.contextMenu' + counter;\r\n                if (!_hasContext) {\r\n                    namespaces[o.selector] = o.ns;\r\n                }\r\n                menus[o.ns] = o;\r\n\r\n                // default to right click\r\n                if (!o.trigger) {\r\n                    o.trigger = 'right';\r\n                }\r\n\r\n                if (!initialized) {\r\n                    // make sure item click is registered first\r\n                    $document\r\n                        .on({\r\n                            'contextmenu:hide.contextMenu': handle.hideMenu,\r\n                            'prevcommand.contextMenu': handle.prevItem,\r\n                            'nextcommand.contextMenu': handle.nextItem,\r\n                            'contextmenu.contextMenu': handle.abortevent,\r\n                            'mouseenter.contextMenu': handle.menuMouseenter,\r\n                            'mouseleave.contextMenu': handle.menuMouseleave\r\n                        }, '.context-menu-list')\r\n                        .on('mouseup.contextMenu', '.context-menu-input', handle.inputClick)\r\n                        .on({\r\n                            'mouseup.contextMenu': handle.itemClick,\r\n                            'contextmenu:focus.contextMenu': handle.focusItem,\r\n                            'contextmenu:blur.contextMenu': handle.blurItem,\r\n                            'contextmenu.contextMenu': handle.abortevent,\r\n                            'mouseenter.contextMenu': handle.itemMouseenter,\r\n                            'mouseleave.contextMenu': handle.itemMouseleave\r\n                        }, '.context-menu-item');\r\n\r\n                    initialized = true;\r\n                }\r\n\r\n                // engage native contextmenu event\r\n                $context\r\n                    .on('contextmenu' + o.ns, o.selector, o, handle.contextmenu);\r\n\r\n                if (_hasContext) {\r\n                    // add remove hook, just in case\r\n                    $context.on('remove' + o.ns, function () {\r\n                        $(this).contextMenu('destroy');\r\n                    });\r\n                }\r\n\r\n                switch (o.trigger) {\r\n                    case 'hover':\r\n                        $context\r\n                            .on('mouseenter' + o.ns, o.selector, o, handle.mouseenter)\r\n                            .on('mouseleave' + o.ns, o.selector, o, handle.mouseleave);\r\n                        break;\r\n\r\n                    case 'left':\r\n                        $context.on('click' + o.ns, o.selector, o, handle.click);\r\n                        break;\r\n                    /*\r\n                     default:\r\n                     // http://www.quirksmode.org/dom/events/contextmenu.html\r\n                     $document\r\n                     .on('mousedown' + o.ns, o.selector, o, handle.mousedown)\r\n                     .on('mouseup' + o.ns, o.selector, o, handle.mouseup);\r\n                     break;\r\n                     */\r\n                }\r\n\r\n                // create menu\r\n                if (!o.build) {\r\n                    op.create(o);\r\n                }\r\n                break;\r\n\r\n            case 'destroy':\r\n                var $visibleMenu;\r\n                if (_hasContext) {\r\n                    // get proper options\r\n                    var context = o.context;\r\n                    $.each(menus, function (ns, o) {\r\n                        if (o.context !== context) {\r\n                            return true;\r\n                        }\r\n\r\n                        $visibleMenu = $('.context-menu-list').filter(':visible');\r\n                        if ($visibleMenu.length && $visibleMenu.data().contextMenuRoot.$trigger.is($(o.context).find(o.selector))) {\r\n                            $visibleMenu.trigger('contextmenu:hide', {force: true});\r\n                        }\r\n\r\n                        try {\r\n                            if (menus[o.ns].$menu) {\r\n                                menus[o.ns].$menu.remove();\r\n                            }\r\n\r\n                            delete menus[o.ns];\r\n                        } catch (e) {\r\n                            menus[o.ns] = null;\r\n                        }\r\n\r\n                        $(o.context).off(o.ns);\r\n\r\n                        return true;\r\n                    });\r\n                } else if (!o.selector) {\r\n                    $document.off('.contextMenu .contextMenuAutoHide');\r\n                    $.each(menus, function (ns, o) {\r\n                        $(o.context).off(o.ns);\r\n                    });\r\n\r\n                    namespaces = {};\r\n                    menus = {};\r\n                    counter = 0;\r\n                    initialized = false;\r\n\r\n                    $('#context-menu-layer, .context-menu-list').remove();\r\n                } else if (namespaces[o.selector]) {\r\n                    $visibleMenu = $('.context-menu-list').filter(':visible');\r\n                    if ($visibleMenu.length && $visibleMenu.data().contextMenuRoot.$trigger.is(o.selector)) {\r\n                        $visibleMenu.trigger('contextmenu:hide', {force: true});\r\n                    }\r\n\r\n                    try {\r\n                        if (menus[namespaces[o.selector]].$menu) {\r\n                            menus[namespaces[o.selector]].$menu.remove();\r\n                        }\r\n\r\n                        delete menus[namespaces[o.selector]];\r\n                    } catch (e) {\r\n                        menus[namespaces[o.selector]] = null;\r\n                    }\r\n\r\n                    $document.off(namespaces[o.selector]);\r\n                }\r\n                break;\r\n\r\n            case 'html5':\r\n                // if <command> or <menuitem> are not handled by the browser,\r\n                // or options was a bool true,\r\n                // initialize $.contextMenu for them\r\n                if ((!$.support.htmlCommand && !$.support.htmlMenuitem) || (typeof options === 'boolean' && options)) {\r\n                    $('menu[type=\"context\"]').each(function () {\r\n                        if (this.id) {\r\n                            $.contextMenu({\r\n                                selector: '[contextmenu=' + this.id + ']',\r\n                                items: $.contextMenu.fromMenu(this)\r\n                            });\r\n                        }\r\n                    }).css('display', 'none');\r\n                }\r\n                break;\r\n\r\n            default:\r\n                throw new Error('Unknown operation \"' + operation + '\"');\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n// import values into <input> commands\r\n    $.contextMenu.setInputValues = function (opt, data) {\r\n        if (data === undefined) {\r\n            data = {};\r\n        }\r\n\r\n        $.each(opt.inputs, function (key, item) {\r\n            switch (item.type) {\r\n                case 'text':\r\n                case 'textarea':\r\n                    item.value = data[key] || '';\r\n                    break;\r\n\r\n                case 'checkbox':\r\n                    item.selected = data[key] ? true : false;\r\n                    break;\r\n\r\n                case 'radio':\r\n                    item.selected = (data[item.radio] || '') === item.value;\r\n                    break;\r\n\r\n                case 'select':\r\n                    item.selected = data[key] || '';\r\n                    break;\r\n            }\r\n        });\r\n    };\r\n\r\n// export values from <input> commands\r\n    $.contextMenu.getInputValues = function (opt, data) {\r\n        if (data === undefined) {\r\n            data = {};\r\n        }\r\n\r\n        $.each(opt.inputs, function (key, item) {\r\n            switch (item.type) {\r\n                case 'text':\r\n                case 'textarea':\r\n                case 'select':\r\n                    data[key] = item.$input.val();\r\n                    break;\r\n\r\n                case 'checkbox':\r\n                    data[key] = item.$input.prop('checked');\r\n                    break;\r\n\r\n                case 'radio':\r\n                    if (item.$input.prop('checked')) {\r\n                        data[item.radio] = item.value;\r\n                    }\r\n                    break;\r\n            }\r\n        });\r\n\r\n        return data;\r\n    };\r\n\r\n// find <label for=\"xyz\">\r\n    function inputLabel(node) {\r\n        return (node.id && $('label[for=\"' + node.id + '\"]').val()) || node.name;\r\n    }\r\n\r\n// convert <menu> to items object\r\n    function menuChildren(items, $children, counter) {\r\n        if (!counter) {\r\n            counter = 0;\r\n        }\r\n\r\n        $children.each(function () {\r\n            var $node = $(this),\r\n                node = this,\r\n                nodeName = this.nodeName.toLowerCase(),\r\n                label,\r\n                item;\r\n\r\n            // extract <label><input>\r\n            if (nodeName === 'label' && $node.find('input, textarea, select').length) {\r\n                label = $node.text();\r\n                $node = $node.children().first();\r\n                node = $node.get(0);\r\n                nodeName = node.nodeName.toLowerCase();\r\n            }\r\n\r\n            /*\r\n             * <menu> accepts flow-content as children. that means <embed>, <canvas> and such are valid menu items.\r\n             * Not being the sadistic kind, $.contextMenu only accepts:\r\n             * <command>, <menuitem>, <hr>, <span>, <p> <input [text, radio, checkbox]>, <textarea>, <select> and of course <menu>.\r\n             * Everything else will be imported as an html node, which is not interfaced with contextMenu.\r\n             */\r\n\r\n            // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#concept-command\r\n            switch (nodeName) {\r\n                // http://www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#the-menu-element\r\n                case 'menu':\r\n                    item = {name: $node.attr('label'), items: {}};\r\n                    counter = menuChildren(item.items, $node.children(), counter);\r\n                    break;\r\n\r\n                // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-a-element-to-define-a-command\r\n                case 'a':\r\n                // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-button-element-to-define-a-command\r\n                case 'button':\r\n                    item = {\r\n                        name: $node.text(),\r\n                        disabled: !!$node.attr('disabled'),\r\n                        callback: (function () {\r\n                            return function () {\r\n                                $node.click();\r\n                            };\r\n                        })()\r\n                    };\r\n                    break;\r\n\r\n                // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-command-element-to-define-a-command\r\n\r\n                case 'menuitem':\r\n                case 'command':\r\n                    switch ($node.attr('type')) {\r\n                        case undefined:\r\n                        case 'command':\r\n                        case 'menuitem':\r\n                            item = {\r\n                                name: $node.attr('label'),\r\n                                disabled: !!$node.attr('disabled'),\r\n                                icon: $node.attr('icon'),\r\n                                callback: (function () {\r\n                                    return function () {\r\n                                        $node.click();\r\n                                    };\r\n                                })()\r\n                            };\r\n                            break;\r\n\r\n                        case 'checkbox':\r\n                            item = {\r\n                                type: 'checkbox',\r\n                                disabled: !!$node.attr('disabled'),\r\n                                name: $node.attr('label'),\r\n                                selected: !!$node.attr('checked')\r\n                            };\r\n                            break;\r\n                        case 'radio':\r\n                            item = {\r\n                                type: 'radio',\r\n                                disabled: !!$node.attr('disabled'),\r\n                                name: $node.attr('label'),\r\n                                radio: $node.attr('radiogroup'),\r\n                                value: $node.attr('id'),\r\n                                selected: !!$node.attr('checked')\r\n                            };\r\n                            break;\r\n\r\n                        default:\r\n                            item = undefined;\r\n                    }\r\n                    break;\r\n\r\n                case 'hr':\r\n                    item = '-------';\r\n                    break;\r\n\r\n                case 'input':\r\n                    switch ($node.attr('type')) {\r\n                        case 'text':\r\n                            item = {\r\n                                type: 'text',\r\n                                name: label || inputLabel(node),\r\n                                disabled: !!$node.attr('disabled'),\r\n                                value: $node.val()\r\n                            };\r\n                            break;\r\n\r\n                        case 'checkbox':\r\n                            item = {\r\n                                type: 'checkbox',\r\n                                name: label || inputLabel(node),\r\n                                disabled: !!$node.attr('disabled'),\r\n                                selected: !!$node.attr('checked')\r\n                            };\r\n                            break;\r\n\r\n                        case 'radio':\r\n                            item = {\r\n                                type: 'radio',\r\n                                name: label || inputLabel(node),\r\n                                disabled: !!$node.attr('disabled'),\r\n                                radio: !!$node.attr('name'),\r\n                                value: $node.val(),\r\n                                selected: !!$node.attr('checked')\r\n                            };\r\n                            break;\r\n\r\n                        default:\r\n                            item = undefined;\r\n                            break;\r\n                    }\r\n                    break;\r\n\r\n                case 'select':\r\n                    item = {\r\n                        type: 'select',\r\n                        name: label || inputLabel(node),\r\n                        disabled: !!$node.attr('disabled'),\r\n                        selected: $node.val(),\r\n                        options: {}\r\n                    };\r\n                    $node.children().each(function () {\r\n                        item.options[this.value] = $(this).text();\r\n                    });\r\n                    break;\r\n\r\n                case 'textarea':\r\n                    item = {\r\n                        type: 'textarea',\r\n                        name: label || inputLabel(node),\r\n                        disabled: !!$node.attr('disabled'),\r\n                        value: $node.val()\r\n                    };\r\n                    break;\r\n\r\n                case 'label':\r\n                    break;\r\n\r\n                default:\r\n                    item = {type: 'html', html: $node.clone(true)};\r\n                    break;\r\n            }\r\n\r\n            if (item) {\r\n                counter++;\r\n                items['key' + counter] = item;\r\n            }\r\n        });\r\n\r\n        return counter;\r\n    }\r\n\r\n// convert html5 menu\r\n    $.contextMenu.fromMenu = function (element) {\r\n        var $this = $(element),\r\n            items = {};\r\n\r\n        menuChildren(items, $this.children());\r\n\r\n        return items;\r\n    };\r\n\r\n// make defaults accessible\r\n    $.contextMenu.defaults = defaults;\r\n    $.contextMenu.types = types;\r\n// export internal functions - undocumented, for hacking only!\r\n    $.contextMenu.handle = handle;\r\n    $.contextMenu.op = op;\r\n    $.contextMenu.menus = menus;\r\n\r\n\r\n});\r\n"],"sourceRoot":"/source/"}